<MissingTranslationBanner />

export const sectionMode = 'nav';
export const description =
  'En esta página, nos sumergiremos en los diferentes puntos finales de MPI que puede usar para administrar las sesiones de autenticación mediante programación.'

export const apiRefs = ['/threeds/v2/sessions']

---

## Crear una sesión {{ id: 'create-a-session', tag: 'POST', label: '/threeds/v2/sessions' }}

<Row>
  <Col>
    Este endpoint te permite crear una nueva sesión para la autenticación del titular de la tarjeta.

    <ApiReader
      path="/threeds/v2/sessions"
      method="post"
      api={props.refs}
    />

  </Col>
  <Col sticky>
    <CodeGroup title="Solicitud" tag="POST" label="/threeds/v2/sessions">
    ```bash {{ title: 'cURL' }}
    curl -X "POST" https://3dss-test.placetopay.com/threeds/v2/sessions \
      -H "Content-Type: application/json" \
      -d '{
          "acctNumber": "4005580000000040",
          "cardExpiryDate": "2506",
          "purchaseAmount": "20.5",
          "purchaseCurrency": "USD",
          "redirectURI": "https://www.placetopay.com",
          "threeDSAuthenticationInd": "01",
          "reference": "12345"
      }'
    ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/threeds/v2/sessions"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Respuesta">
    ```json {{ title: '200' }}
    {
      "sessionToken": "8e580eb1948ae1b13e614aac04c75ad31d6431ef2ea7b1a85573979b7ec4e656",
      "redirectURL": "https://3dss-test.placetopay.com/threeds/v2/sessions/8e580eb1948ae1b13e614aac04c75ad31d6431ef2ea7b1a85573979b7ec4e656",
      "transactionID": 9099
    }
    ```
    ```json {{ title: '401' }}
    {
      "error_number": "1011",
      "error_description": "Invalid arguments to initiate request",
      "errors": {
        "acctNumber": [
          "The acct number field is required."
        ],
        "cardExpiryDate": [
          "The card expiry date field is required."
        ],
        "purchaseAmount": [
          "The purchase amount field is required."
        ],
        "redirectURI": [
          "The redirect URI field is required."
        ],
        "purchaseCurrency": [
          "The purchase currency field is required."
        ]
      }
    }
    ```
    ```json {{ title: '422' }}
    {
      "error_number": "1003",
      "error_description": "No se encontró un comercio asociado",
      "errors": {}
    }
    ```
    </CodeGroup>
  </Col>
</Row>

---

## Consultar una sesión {{ id: 'query-a-session', tag: 'POST', label: '/threeds/v2/sessions' }}

<Row>
  <Col>
    Este endpoint te permite obtener la información de una sesión de autenticación.

    <ApiReader
      path="/threeds/v2/sessions"
      type="params"
      api={props.refs}
    />
  </Col>
</Row>

<br />

<Row>
  <Col>
    <ApiReader
      path="/threeds/v2/sessions"
      method="post"
      api={props.refs}
    />

  </Col>
  <Col sticky>
    <CodeGroup title="Solicitud" tag="POST" label="/threeds/v2/sessions">
    ```bash {{ title: 'cURL' }}
    curl -X "POST" https://3dss-test.placetopay.com/threeds/v2/sessions/8e580eb1948ae1b13e614aac04c75ad31d6431ef2ea7b1a85573979b7ec4e656 \
      -H "Content-Type: application/json" \
      -d '{
          "auth": {
            "login": "c51ce410c124a10e0db5e4b97fc2af39",
            "tranKey": "VQOcRcVH2DfL6Y4B4SaK6yhoH/VOUveZ3xT16OQnvxE=",
            "nonce": "NjE0OWVkODgwYjNhNw==",
            "seed": "2021-09-21T09:34:48-05:00"
          }
        }'
    ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/threeds/v2/sessions"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>

  <Col sticky>
    <br />
    <CodeGroup title="Respuesta">
    ```json {{ title: '200' }}
    {
      "sessionToken": "8e580eb1948ae1b13e614aac04c75ad31d6431ef2ea7b1a85573979b7ec4e656",
      "redirectURL": "https://3dss-test.placetopay.com/threeds/v2/sessions/8e580eb1948ae1b13e614aac04c75ad31d6431ef2ea7b1a85573979b7ec4e656",
      "transactionID": 9099,
      "status": {
        "status": "APPROVED",
        "reason": "00",
        "message": "La autenticación ha sido aprobada exitosamente",
        "date": "2022-07-27T14:51:27-05:00"
      }
    }
    ```
    ```json {{ title: '401' }}
    {
      "error_number": "1011",
      "error_description": "Invalid arguments to initiate request",
      "errors": {
        "acctNumber": [
          "The acct number field is required."
        ],
        "cardExpiryDate": [
          "The card expiry date field is required."
        ],
        "purchaseAmount": [
          "The purchase amount field is required."
        ],
        "redirectURI": [
          "The redirect URI field is required."
        ],
        "purchaseCurrency": [
          "The purchase currency field is required."
        ]
      }
    }
    ```
    ```json {{ title: '422' }}
    {
      "error_number": "1003",
      "error_description": "No se encontró un comercio asociado",
      "errors": {}
    }
    ```
    </CodeGroup>
  </Col>
</Row>

---
