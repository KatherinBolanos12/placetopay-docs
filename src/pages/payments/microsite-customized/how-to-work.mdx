import { HeroPattern } from '@/components/HeroPattern'
import CustomMicrositeFlow from "@/components/react-flow/CustomMicrositeFlow";

export const sectionMode = 'nav';
export const description = ""

<HeroPattern />

## ¿Cómo funciona? 

El **Servicio de Consulta de Facturas Externo** permite a PlacetoPay realizar consultas a un servicio externo para obtener información de facturas y gestionar su pago. También permite el asentamiento de pagos cuando se procesan a través de la plataforma.  

### Funcionamiento del Servicio
1. **Autenticación:**  
   - Se soportan dos tipos de autenticación:  
     - **Web Services Security (WSS):** Usa `UsernameToken Profile 1.1`, donde las credenciales incluyen `login`, `tranKey`, `nonce` y `seed`.  
     - **JSON Web Token (JWT):** Se basa en la autenticación básica con `username` y `password`, generando un `access_token` para las peticiones.  

2. **Consultas de Facturas:**  
   - Se realiza mediante `POST /invoice/search/`.  
   - Se pueden buscar facturas por referencia, documento del pagador o referencia alterna.  
   - Se pueden aplicar filtros adicionales y definir restricciones de pago.  
   - La respuesta incluye datos como estado de la factura, montos, impuestos y métodos de pago disponibles.  

3. **Bloqueo y Liberación de Facturas:**  
   - Se pueden bloquear facturas (`POST /invoice/hold`) para evitar pagos mientras estén en proceso de validación.  
   - Para desbloquearlas, se debe enviar una solicitud con el parámetro `revoke: true`.  

4. **Asentamiento de Pagos:**  
   - Una vez realizado el pago, se debe enviar una petición `POST /invoice/settle/` con los detalles de la transacción.  
   - Incluye datos como ID de la factura, código de autorización, monto, fecha, método de pago y referencia interna.  

5. **Manejo de Errores:**  
   - Se proporciona una estructura estándar de errores para casos como autenticación fallida, asentamiento ya realizado o factura inexistente.  
   - Se pueden traducir los mensajes de error según el idioma  [Locale](/checkout/localization).  

6. **Configuración de Métodos de Pago:**  
   - Se pueden definir los métodos de pago disponibles por factura.  
   - Se permite la intersección o fusión de métodos cuando se pagan varias facturas en una sola transacción.  

Este servicio web está diseñado para integrarse con cualquier sistema que soporte comunicación REST, permitiendo un flujo de pago seguro y eficiente.

### Flujo de ayuda

<CustomMicrositeFlow></CustomMicrositeFlow>


